<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello World! Hello GLSL!</title>
<link rel="stylesheet" href="style.css">

</head>
<body>
<p>Hello World! Hello GLSL!</p>
<canvas>Your browser does not seem to support HTML canvas.</canvas>
<div id="controls" class="controls-panel">
  <h3>Fractal Controls</h3>
  <div class="control-group">
    <label for="centerX">Center X:</label>
    <input type="range" id="centerX" min="-2" max="1" step="0.001" value="-0.5">
    <span class="value-display" id="centerXValue">-0.5</span>
  </div>
  <div class="control-group">
    <label for="centerY">Center Y:</label>
    <input type="range" id="centerY" min="-1.5" max="1.5" step="0.001" value="0.0">
    <span class="value-display" id="centerYValue">0.0</span>
  </div>
  <div class="control-group">
    <label for="zoom">Zoom:</label>
    <input type="range" id="zoom" min="0.1" max="1000" step="0.1" value="1.0">
    <span class="value-display" id="zoomValue">1.0</span>
  </div>
  <div class="control-group">
    <label for="maxIterations">Max Iterations:</label>
    <input type="range" id="maxIterations" min="10" max="500" step="10" value="100">
    <span class="value-display" id="maxIterationsValue">100</span>
  </div>
  <button id="resetBtn" class="reset-btn">Reset to Default</button>
</div>
<script type="x-shader/x-vertex" id="vertex-shader">
  attribute vec2 a_position;
  varying vec2 v_uv;
  
  void main() {
    v_uv = a_position * 0.5 + 0.5; // Convert from -1..1 to 0..1
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
</script>
<script type="x-shader/x-fragment" id="fragment-shader">
  precision mediump float;
  
  uniform vec2 u_resolution;
  uniform vec2 u_center;
  uniform float u_zoom;
  uniform int u_maxIterations;
  
  varying vec2 v_uv;
  
  void main() {
    // Map pixel coordinates to complex plane
    vec2 c = (v_uv - 0.5) * 2.0;
    c.x *= u_resolution.x / u_resolution.y; // Aspect ratio correction
    c = c / u_zoom + u_center;
    
    // Mandelbrot iteration: z = z^2 + c
    vec2 z = vec2(0.0);
    int iterations = 0;
    
    for (int i = 0; i < 256; i++) {
      if (i >= u_maxIterations) break;
      
      // z = z^2 + c
      float x = (z.x * z.x - z.y * z.y) + c.x;
      float y = (z.x * z.y * 2.0) + c.y;
      z = vec2(x, y);
      
      // Check if escaped
      if (dot(z, z) > 4.0) {
        iterations = i;
        break;
      }
    }
    
    // Color based on iterations
    float t = float(iterations) / float(u_maxIterations);
    
    if (iterations == u_maxIterations) {
      // Inside the set - black
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    } else {
      // Outside the set - colorful gradient
      vec3 color = vec3(
        0.5 + 0.5 * cos(3.0 + t * 10.0),
        0.5 + 0.5 * cos(2.0 + t * 10.0),
        0.5 + 0.5 * cos(1.0 + t * 10.0)
      );
      gl_FragColor = vec4(color, 1.0);
    }
  }
</script>
<script src="script.js"></script>
</body>
</html>